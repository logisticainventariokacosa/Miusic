<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusicStream - Tu plataforma de m√∫sica</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Agregar estos estilos para las nuevas caracter√≠sticas */
        .stats-bar {
            background: var(--dark-card);
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }
        .stats {
            display: flex;
            gap: 20px;
            color: var(--text-secondary);
            font-size: 14px;
        }
        .duration-badge {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
        }
        .btn-retry, .btn-upload-first {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            margin-top: 15px;
            transition: var(--transition);
        }
        .btn-retry:hover, .btn-upload-first:hover {
            background: var(--primary-dark);
        }
        .song-size {
            font-size: 12px;
            color: var(--text-muted);
        }
        .stats strong {
            color: var(--primary-color);
        }
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid var(--primary-color);
        }
        .btn-login, .btn-logout {
            background-color: var(--primary-color);
            color: white !important;
            border: none;
            padding: 8px 16px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-block;
        }
        .btn-login:hover, .btn-logout:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        .uploader {
            font-size: 11px;
            color: var(--text-muted);
            font-style: italic;
        }
        .song-meta {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <!-- Header con navegaci√≥n -->
    <header>
        <div class="container">
            <div class="logo">
                <h1>üéµ MusicStream</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#" id="home-link">Inicio</a></li>
                    <li><a href="#" id="upload-link">Subir M√∫sica</a></li>
                    <li><a href="#" id="stats-link">Estad√≠sticas</a></li>
                    <!-- Botones de auth -->
                    <li><a href="#" id="login-btn" class="btn-login">Iniciar Sesi√≥n</a></li>
                    <li><a href="#" id="logout-btn" class="btn-logout hidden">Cerrar Sesi√≥n</a></li>
                    <li><a href="#" id="user-profile" class="hidden user-profile"></a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Barra de estad√≠sticas -->
    <section class="stats-bar">
        <div class="container">
            <div class="stats">
                <span id="total-songs">üéµ Cargando canciones...</span>
                <span id="total-genres">üìä </span>
                <span id="total-size">üíæ </span>
            </div>
        </div>
    </section>

    <!-- Secci√≥n de inicio de sesi√≥n -->
    <section id="login-section" class="section">
        <div class="container">
            <div class="login-card">
                <h2>Bienvenido a MusicStream</h2>
                <p>Inicia sesi√≥n con Google para acceder a tu biblioteca musical</p>
                <button id="google-login" class="btn-google">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTcuNiA5LjJsLS4xLTEuOEg5djMuNGg0LjhDMTMuNiAxMiAxMyAxMyAxMiAxMy42djIuMmgzYTguOCA4LjggMCAwIDAgMi42LTYuNnoiIGZpbGw9IiM0Mjg1RjQiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGQ9Ik05IDE4YzIuNCAwIDQuNS0uOCA2LTIuMmwtMy0yLjJhNS40IDUuNCAwIDAgMS04LTIuOUgxVjEzYTkgOSAwIDAgMCA4IDV6IiBmaWxsPSIjMzRBODUzIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNNCAxMC43YTUuNCA1LjQgMCAwIDEgMC0zLjRWNUgxYTkgOSAwIDAgMCAwIDhsMy0yLjN6IiBmaWxsPSIjRkJCQzA1IiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNOSAzLjZjMS4zIDAgMi41LjQgMy40IDEuM0wxNSAyLjNBOSA5IDAgMCAwIDEgNWwzIDIuNGE1LjQgNS40IDAgMCAxIDUtMy43eiIgZmlsbD0iI0VBNDMzNSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PHBhdGggZD0iTTAgMGgxOHYxOEgweiIvPjwvZz48L3N2Zz4=" alt="Google">
                    Iniciar sesi√≥n con Google
                </button>
                <div class="login-features">
                    <h3>‚ú® Caracter√≠sticas:</h3>
                    <ul>
                        <li>üìÅ Sube hasta 500+ canciones</li>
                        <li>üéµ Reproduce m√∫sica online</li>
                        <li>üì• Descarga tus canciones favoritas</li>
                        <li>üîç B√∫squeda avanzada por g√©nero y artista</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Secci√≥n principal -->
    <main id="main-content" class="hidden">
        <!-- Barra de b√∫squeda -->
        <section class="search-section">
            <div class="container">
                <div class="search-bar">
                    <input type="text" id="search-input" placeholder="Buscar por canci√≥n, artista o g√©nero...">
                    <button id="search-btn">üîç Buscar</button>
                </div>
                <div class="filter-options">
                    <select id="genre-filter">
                        <option value="">Todos los g√©neros</option>
                        <option value="rock">üé∏ Rock</option>
                        <option value="pop">üé§ Pop</option>
                        <option value="jazz">üé∑ Jazz</option>
                        <option value="hiphop">üéß Hip Hop</option>
                        <option value="electronica">‚ö° Electr√≥nica</option>
                        <option value="clasica">üéª Cl√°sica</option>
                        <option value="reggaeton">üî• Reggaeton</option>
                        <option value="salsa">üíÉ Salsa</option>
                        <option value="otros">üéµ Otros</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Reproductor de m√∫sica -->
        <section class="player-section">
            <div class="container">
                <div class="player-card">
                    <div class="song-info">
                        <img id="current-song-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzJhMmEyYSIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM4ODgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5TZWxlY2Npb25hIHVuYSBjYW5jacOzbjwvdGV4dD48L3N2Zz4=" alt="Portada">
                        <div class="song-details">
                            <h3 id="current-song-title">Selecciona una canci√≥n</h3>
                            <p id="current-song-artist">Artista</p>
                        </div>
                    </div>
                    <div class="player-controls">
                        <button id="prev-btn" class="control-btn" title="Canci√≥n anterior">‚èÆ</button>
                        <button id="play-btn" class="control-btn play" title="Reproducir/Pausar">‚ñ∂</button>
                        <button id="next-btn" class="control-btn" title="Siguiente canci√≥n">‚è≠</button>
                    </div>
                    <div class="progress-container">
                        <span id="current-time">0:00</span>
                        <div class="progress-bar">
                            <div class="progress"></div>
                        </div>
                        <span id="duration">0:00</span>
                    </div>
                    <div class="volume-control">
                        <span>üîä</span>
                        <input type="range" id="volume-slider" min="0" max="100" value="50" title="Volumen">
                    </div>
                </div>
            </div>
        </section>

        <!-- Lista de canciones -->
        <section class="songs-section">
            <div class="container">
                <h2>üéµ Biblioteca de M√∫sica</h2>
                <div id="songs-container" class="songs-grid">
                    <!-- Las canciones se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>
        </section>

        <!-- Secci√≥n de subir m√∫sica -->
        <section id="upload-section" class="section hidden">
            <div class="container">
                <div class="upload-card">
                    <h2>üì§ Subir Nueva Canci√≥n</h2>
                    <p class="upload-info">Solo usuarios registrados pueden subir m√∫sica</p>
                    <form id="upload-form">
                        <div class="form-group">
                            <label for="song-file">üéµ Archivo de audio (MP3, WAV, m√°ximo 15MB)</label>
                            <input type="file" id="song-file" accept="audio/*" required>
                            <small>Formatos aceptados: MP3, WAV, OGG</small>
                        </div>
                        <div class="form-group">
                            <label for="song-cover">üñºÔ∏è Portada (opcional)</label>
                            <input type="file" id="song-cover" accept="image/*">
                            <small>JPEG, PNG, WebP (recomendado: 500x500px)</small>
                        </div>
                        <div class="form-group">
                            <label for="song-name">üìù Nombre de la canci√≥n</label>
                            <input type="text" id="song-name" placeholder="Ej: Summer Vibes" required>
                        </div>
                        <div class="form-group">
                            <label for="artist-name">üé§ Artista</label>
                            <input type="text" id="artist-name" placeholder="Ej: DJ Stream" required>
                        </div>
                        <div class="form-group">
                            <label for="song-genre">üéµ G√©nero</label>
                            <select id="song-genre" required>
                                <option value="">Selecciona un g√©nero</option>
                                <option value="rock">üé∏ Rock</option>
                                <option value="pop">üé§ Pop</option>
                                <option value="jazz">üé∑ Jazz</option>
                                <option value="hiphop">üéß Hip Hop</option>
                                <option value="electronica">‚ö° Electr√≥nica</option>
                                <option value="clasica">üéª Cl√°sica</option>
                                <option value="reggaeton">üî• Reggaeton</option>
                                <option value="salsa">üíÉ Salsa</option>
                                <option value="otros">üéµ Otros</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-upload">üöÄ Subir Canci√≥n</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2024 MusicStream. Tu plataforma musical con Firebase Auth + Supabase DB. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Scripts ACTUALIZADOS para Firebase Auth + Storage -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script> <!-- ‚úÖ AGREGAR ESTA L√çNEA -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="app.js"></script>

</body>
</html>
